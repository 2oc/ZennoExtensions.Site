<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Настройка браузера &middot; ZennoExtensions
    
  </title>

  


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->
</head>


  <body class="page">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        ZennoExtensions
      </a>
    </div>
    <p class="lead">Библиотека для <a href="http://zennolab.com/ru/products/zennoposter/" target="_blank">ZennoPoster</a></p>
  </header>
  
  <a class="page-link" href="http://zennolab.com/discussion/" target="_blank">Форум ZennoLab</a>

  <br/>

  <div class="lead">Статьи</div>
  <ul>
    <li>
      <a class="page-link "
         
         href="/start">Подключение</a>
    </li>
    <li>
      <a class="page-link "
        
        href="/AccountManager">Менеджер аккаунтов</a>
    </li>
    <li>
      <a class="page-link  active"
        style="color: #00ccff"
        href="/BrowserManager">Настройка браузера</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/MultiLogger">Логирование</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/ExtensionMethods">Методы расширения</a>
    </li>
  </ul>
  <a class="page-link "
     
     href="/docs">Документация</a>
  <ul>
    <li>
      <a class="page-link "
         
         href="/docs/#AccountManager">Менеджер аккаунтов</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#Browser">Настройка браузера</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#MultiLogger">Мультилогер</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#Instance">Instance</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#Project">Project</a>
    </li>
    <li>
      <a class="page-link "
         
      href="/docs/#Variables">Project.Variables</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#Tab">Tab</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#HtmlElement">HtmlElement</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#DateTime">DateTime</a>
    </li>
    <li>
      <a class="page-link "
         
         href="/docs/#Int32">Int32</a>
    </li>
  </ul>

</div>

    <main class="container">
      <header>
  <h1 class="page-title">Настройка браузера</h1>
</header>
<div class="content">
  <p>BrowserManager предоставляет возможность генерировать набор параметров (профиль браузера), применять к инстансу и сохранять для повторного использования.</p>

<hr />

<p>Функционал настройки браузера находится в пространстве имен <code class="highlighter-rouge">ZennoExtensions.Browser</code>.<br />
Для использования подключите пространство имен:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">ZennoExtensions.Browser</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h2 id="генерируемые-параметры">Генерируемые параметры</h2>

<p>Менеджер браузера может генерировать следующие параметры:</p>

<ul>
  <li>Используемый браузер (Firefox, Chrome)</li>
  <li>Используемое устройство (на данный момент только Windows)</li>
  <li>Настройки браузера:
    <ul>
      <li>Использование JavaScript</li>
      <li>Блокировка рекламы</li>
      <li>Использование веб хранилищ (LocalStorage, SessionStorage, Global Storage, Database Storage)</li>
      <li>Использование IndexedDb</li>
      <li>Использование WebGL</li>
      <li>Использование плагинов</li>
      <li>DoNotTrack</li>
      <li>Подмена часового пояса</li>
      <li>Эмуляция WebRTC</li>
      <li>Эмуляция Canvas</li>
    </ul>
  </li>
  <li>Свойства навигатора и HTTP заголовки</li>
</ul>

<hr />

<h2 id="генерация">Генерация</h2>

<p>Для генерации профиля браузера необхдимо вызвать метод <code class="highlighter-rouge">BrowserManager.Generate()</code>, который принимает 1 необязательный параметр - правила генерации.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">profile</span> <span class="p">=</span> <span class="n">BrowserManager</span><span class="p">.</span><span class="nf">Generate</span><span class="p">();</span>
</code></pre></div></div>

<p>Вы можете настроить как именно производить генерацию, передав объект правил в метод <code class="highlighter-rouge">Generate</code>.</p>
<blockquote>
  <p>Для настройки правил подключите пространства имен:<br />
  <code class="highlighter-rouge">using ZennoExtensions.Browser.Generation.Rules;</code><br />
  <code class="highlighter-rouge">using ZennoExtensions.Browser.Model.Filters;</code></p>
</blockquote>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">rules</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GenerationRules</span><span class="p">();</span>
<span class="n">rules</span><span class="p">.</span><span class="n">BrowserType</span> <span class="p">=</span> <span class="n">BrowserType</span><span class="p">.</span><span class="n">MozillaFirefox</span><span class="p">;</span>
<span class="n">rules</span><span class="p">.</span><span class="n">BrowserSettings</span><span class="p">.</span><span class="n">DoNotTrack</span> <span class="p">=</span> <span class="n">BoolFilter</span><span class="p">.</span><span class="n">True</span> <span class="p">|</span> <span class="n">BoolFilter</span><span class="p">.</span><span class="n">False</span><span class="p">;</span>
<span class="n">rules</span><span class="p">.</span><span class="n">BrowserSettings</span><span class="p">.</span><span class="n">CanvasRenderMode</span> <span class="p">=</span> <span class="n">CanvasMode</span><span class="p">.</span><span class="n">Emulate</span><span class="p">;</span>
<span class="n">rules</span><span class="p">.</span><span class="n">Navigator</span><span class="p">.</span><span class="n">GenerateHardwareConcurrency</span> <span class="p">=</span> <span class="n">BoolFilter</span><span class="p">.</span><span class="n">True</span><span class="p">;</span>
<span class="n">rules</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">UseScreenResolutionGeneration</span> <span class="p">=</span> <span class="n">BoolFilter</span><span class="p">.</span><span class="n">True</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">profile</span> <span class="p">=</span> <span class="n">BrowserManager</span><span class="p">.</span><span class="nf">Generate</span><span class="p">(</span><span class="n">rules</span><span class="p">);</span>
</code></pre></div></div>

<p>Обратите внимание, свойствам, принимающим перечисление, можно передать сразу несколько значений. Тогда во время генерации будет выбрано случайное из переданных значений:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rules</span><span class="p">.</span><span class="n">BrowserSettings</span><span class="p">.</span><span class="n">DoNotTrack</span> <span class="p">=</span> <span class="n">BoolFilter</span><span class="p">.</span><span class="n">True</span> <span class="p">|</span> <span class="n">BoolFilter</span><span class="p">.</span><span class="n">False</span><span class="p">;</span>
</code></pre></div></div>

<p>После генерации профиля его нужно применить к ZennoPoster’у:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BrowserManager</span><span class="p">.</span><span class="nf">Setup</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">project</span><span class="p">);</span>
</code></pre></div></div>
<p>После применения все параметры инстанса будут установлены в соответствии со сгенерированными.</p>

<hr />

<h2 id="сохранение-и-загрузка">Сохранение и загрузка</h2>

<p>Если вам необходимо повторно использовать сгенерированные параметры, вы можете сохранить их.
Сохранение рекомендуется делать перед самым завершением работы шаблона. В противном случае данные полученные во время серфинга (куки, данные хранилищ..) не будут сохранены.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Сохраняем в файл</span>
<span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="s">"C:\\1.xml"</span><span class="p">;</span>
<span class="n">BrowserManager</span><span class="p">.</span><span class="nf">Save</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
</code></pre></div></div>

<p>Для повторного использования нужно загрузить и снова применить профиль:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="s">"C:\\1.xml"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">profile</span> <span class="p">=</span> <span class="n">BrowserManager</span><span class="p">.</span><span class="nf">Load</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="n">BrowserManager</span><span class="p">.</span><span class="nf">Setup</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">project</span><span class="p">);</span>
</code></pre></div></div>

</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
